jQuery.fn.liveSearch=function(b){var a=jQuery.extend({url:"/search-results.php?q=",id:"jquery-live-search",duration:400,typeDelay:200,loadingClass:"loading",onSlideUp:function(){},uptadePosition:false},b);
var c=jQuery("#"+a.id);
if(!c.length){c=jQuery('<div id="'+a.id+'"></div>').appendTo(document.body).hide().slideUp(0);
jQuery(document.body).click(function(e){var d=jQuery(e.target);
if(!(d.is("#"+a.id)||d.parents("#"+a.id).length||d.is("input"))){c.slideUp(a.duration,function(){a.onSlideUp()
})
}})
}return this.each(function(){var d=jQuery(this).attr("autocomplete","off");
var g=parseInt(c.css("paddingLeft"),10)+parseInt(c.css("paddingRight"),10)+parseInt(c.css("borderLeftWidth"),10)+parseInt(c.css("borderRightWidth"),10);
var f=function(){var j=d.offset();
var i={left:j.left,top:j.top,width:d.outerWidth(),height:d.outerHeight()};
i.topPos=i.top+i.height;
i.totalWidth=i.width-g;
c.css({position:"absolute",left:i.left+"px",top:i.topPos+"px",width:i.totalWidth+"px"})
};
var e=function(){f();
$(window).unbind("resize",f);
$(window).bind("resize",f);
c.slideDown(a.duration)
};
var h=function(){c.slideUp(a.duration,function(){a.onSlideUp()
})
};
d.focus(function(){if(this.value!==""){if(c.html()==""){this.lastValue="";
d.keyup()
}else{setTimeout(e,1)
}}}).keyup(function(){if(this.value!=this.lastValue){d.addClass(a.loadingClass);
var i=this.value;
if(this.timer){clearTimeout(this.timer)
}this.timer=setTimeout(function(){jQuery.get(a.url+i,function(j){d.removeClass(a.loadingClass);
if(j.length&&i.length){c.html(j);
e()
}else{h()
}})
},a.typeDelay);
this.lastValue=this.value
}})
})
};